var AssemblyStage=function(){function I(){if(i!==g-1){i++;var t=235-o[i].x;createjs.Tween.get(f).to({x:t},250),e.getSound("slideLeft").play()}}function M(){if(0!==i){i--;var t=235-o[i].x;createjs.Tween.get(f).to({x:t},250),e.getSound("slideRight").play()}}function y(){if(f.removeAllChildren(),i=0,f.x=235,f.y=180,0===l)o=w,m.gotoAndStop("instructBubble5");else if(1===l)o=b,m.gotoAndStop("instructBubble6");else if(2===l)o=E,c.swapChildren(d,f),m.gotoAndStop("instructBubble7");else if(3===l)o=T,m.gotoAndStop("instructBubble8");else{if(4!==l)return createjs.Tween.removeAllTweens(),void c.dispatchEvent(n);o=A,m.gotoAndStop("instructBubble9")}g=o.length;for(var e=60,t=0,a=o.length,s=0;a>s;s++)o[s].x=t,o[s].y=50,t+=o[s].getBounds().width+e,f.addChild(o[s])}function k(e){r=e.stageX}function j(e){if(r){var t=e.stageX,a=r-t;0>a?M():I(),r=null}}function C(t){"mousedown"===t.type?(p.gotoAndStop("btnOkDown"),e.getSound("beep").play(),a.assembleMe(o[i]),l++,y()):p.gotoAndStop("btnOkUp")}var e=window.assetManager,t=window.root,a=window.spaceShip,s=window.background.getSprite(),n=new createjs.Event("onStageComplete",!0),r=null,o=null,i=0,g=0,l=0,d=a.getShipContainer(),c=new createjs.Container;c.snapToPixelEnabled=!0;var u=e.getSprite("assets","constructionBar",0,150,!1);c.addChild(u);var S=e.getSprite("assets","constructionBar",0,720,!1);c.addChild(S);var v=e.getSprite("assets","astronautWaving",50,70);v.rotation=45,c.addChild(v);var m=e.getSprite("assets","instructBubble5",130,30,!1);c.addChild(m);var p=e.getSprite("assets","btnOkUp",255,795,!1);p.addEventListener("mousedown",C),p.addEventListener("pressup",C),c.addChild(p);for(var f=new createjs.Container,w=[],h=0;5>h;h++)w[h]=e.getSprite("assets","fuselage"+(h+1),0,0,!1),w[h].type="fuselage";var b=[];for(h=0;5>h;h++)b[h]=e.getSprite("assets","wings"+(h+1),0,0,!1),b[h].type="wings";var E=[];for(h=0;5>h;h++)E[h]=e.getSprite("assets","tail"+(h+1),0,0,!1),E[h].type="tail";var T=[];for(h=0;4>h;h++)T[h]=e.getSprite("assets","cockpit"+(h+1)),T[h].type="cockpit";var A=[];for(h=0;3>h;h++)A[h]=e.getSprite("assets","laser"+(h+1),0,0,!1),A[h].type="laser";y(),this.showMe=function(){s.addEventListener("mousedown",k),s.addEventListener("pressmove",j),r=null,l=0,y(),v.y=70,createjs.Tween.get(v,{loop:!0}).to({y:v.y-10},4e3).to({y:v.y},4e3),c.addChild(f),a.showMeOn(c,235,230),t.addChild(c)},this.hideMe=function(){s.removeEventListener("mousedown",k),s.removeEventListener("pressmove",j),createjs.Tween.removeAllTweens(),t.removeChild(c)}};
