var AssemblyStage=function(){function B(){if(i!==l-1){i++;var t=235-o[i].x;createjs.Tween.get(S).to({x:t},250),e.getSound("slideLeft").play()}}function E(){if(0!==i){i--;var t=235-o[i].x;createjs.Tween.get(S).to({x:t},250),e.getSound("slideRight").play()}}function j(){if(S.removeAllChildren(),i=0,S.x=235,S.y=180,0===d)o=h,c.gotoAndStop("instructBubble5");else if(1===d)o=y,c.gotoAndStop("instructBubble6");else if(2===d)o=m,u.swapChildren(v,S),c.gotoAndStop("instructBubble7");else if(3===d)o=C,c.gotoAndStop("instructBubble8");else{if(4!==d)return createjs.Tween.removeAllTweens(),void u.dispatchEvent(n);o=A,c.gotoAndStop("instructBubble9")}l=o.length;for(var e=60,t=0,r=o.length,s=0;r>s;s++)o[s].x=t,o[s].y=50,t+=o[s].getBounds().width+e,S.addChild(o[s])}function T(e){a=e.stageX}function x(e){if(a){var t=e.stageX,r=a-t;0>r?E():B(),a=null}}function L(t){"mousedown"===t.type?(w.gotoAndStop("btnOkDown"),e.getSound("beep").play(),r.assembleMe(o[i]),d++,j()):w.gotoAndStop("btnOkUp")}var e=window.assetManager,t=window.root,r=window.spaceShip,s=window.background.getSprite(),n=new createjs.Event("onStageComplete",!0),a=null,o=null,i=0,l=0,d=0,v=r.getShipContainer(),u=new createjs.Container;u.snapToPixelEnabled=!0;var p=e.getSprite("assets","constructionBar",0,150,!1);u.addChild(p);var g=e.getSprite("assets","constructionBar",0,720,!1);u.addChild(g);var f=e.getSprite("assets","astronautWaving",50,70);f.rotation=45,u.addChild(f);var c=e.getSprite("assets","instructBubble5",130,30,!1);u.addChild(c);var w=e.getSprite("assets","btnOkUp",255,795,!1);w.addEventListener("mousedown",L),w.addEventListener("pressup",L),u.addChild(w);for(var S=new createjs.Container,h=[],b=0;5>b;b++)h[b]=e.getSprite("assets","fuselage"+(b+1),0,0,!1),h[b].type="fuselage";var y=[];for(b=0;5>b;b++)y[b]=e.getSprite("assets","wings"+(b+1),0,0,!1),y[b].type="wings";var m=[];for(b=0;5>b;b++)m[b]=e.getSprite("assets","tail"+(b+1),0,0,!1),m[b].type="tail";var C=[];for(b=0;4>b;b++)C[b]=e.getSprite("assets","cockpit"+(b+1)),C[b].type="cockpit";var A=[];for(b=0;3>b;b++)A[b]=e.getSprite("assets","laser"+(b+1),0,0,!1),A[b].type="laser";j(),this.showMe=function(){s.addEventListener("mousedown",T),s.addEventListener("pressmove",x),a=null,d=0,j(),f.y=70,createjs.Tween.get(f,{loop:!0}).to({y:f.y-10},4e3).to({y:f.y},4e3),u.addChild(S),r.showMeOn(u,235,230),t.addChild(u)},this.hideMe=function(){s.removeEventListener("mousedown",T),s.removeEventListener("pressmove",x),createjs.Tween.removeAllTweens(),t.removeChild(u)}};