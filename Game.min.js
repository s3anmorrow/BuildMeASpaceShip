function randomMe(e,t){return Math.floor(Math.random()*(1+t-e))+e}function onInit(){console.log(">> initializing"),canvas=document.getElementById("stage"),stage=new createjs.Stage(canvas),createjs.Touch.isSupported()&&(console.log(">> touch device detected"),createjs.Touch.enable(stage,!0,!1)),root=new createjs.Container,stage.addChild(root),assetManager=new AssetManager,stage.addEventListener("onAllAssetsLoaded",onSetup),assetManager.loadAssets(manifest),onResize()}function onResize(){var t=window.innerWidth,a=window.innerHeight,n=!1;n?(stage.scaleX=t/BASE_WIDTH,stage.scaleY=a/BASE_HEIGHT,stage.canvas.width=BASE_WIDTH*stage.scaleX,stage.canvas.height=BASE_HEIGHT*stage.scaleY):(scaleRatio=Math.min(t/BASE_WIDTH,a/BASE_HEIGHT),stage.scaleX=scaleRatio,stage.scaleY=scaleRatio,canvas.width=BASE_WIDTH*scaleRatio,canvas.height=BASE_HEIGHT*scaleRatio)}function onPause(){background.pauseMe(),asteroidStage.pauseMe(),createjs.Touch.disable(stage),createjs.Ticker.setPaused(!0),createjs.Ticker.removeEventListener("tick",onTick)}function onResume(){background.unPauseMe(),asteroidStage.unPauseMe(),createjs.Touch.enable(stage,!0,!1),createjs.Ticker.setPaused(!1),createjs.Ticker.addEventListener("tick",onTick)}function onSetup(){console.log(">> adding sprites to game"),stage.removeEventListener("onAllAssetsLoaded",onSetup),background=new Background,background.showMe(),spaceShip=new SpaceShip,startStage=new StartStage,instructStage=new InstructStage,assemblyStage=new AssemblyStage,colorStage=new ColorStage,blastOffStage=new BlastOffStage,asteroidStage=new AsteroidStage,cometStage=new CometStage,astronautStage=new AstronautStage,gameStages=[startStage,instructStage,assemblyStage,colorStage,blastOffStage,instructStage,asteroidStage,instructStage,cometStage,astronautStage,instructStage],gameStagesNoInstruct=[assemblyStage,colorStage,blastOffStage,asteroidStage,cometStage,astronautStage,instructStage],stage.addEventListener("onStageComplete",onStageComplete,!0),createjs.Ticker.setFPS(frameRate),createjs.Ticker.addEventListener("tick",onTick),window.addEventListener("resize",onResize),mobile?(document.addEventListener("pause",onPause),document.addEventListener("resume",onResume)):(window.addEventListener("blur",onPause),window.addEventListener("focus",onResume)),gameStages[gameStageIndex].showMe(),console.log(">> game ready"),console.log(">> stage start - index: "+gameStageIndex)}function onStageComplete(){console.log(">> stage complete"),gameStageIndex===gameStages.length-1?(gameStages[gameStageIndex].hideMe(),gameStageIndex=0,spaceShip.resetMe(),gameStages=gameStagesNoInstruct,instructStage.setExpertMode(!0),gameStages[gameStageIndex].showMe()):(gameStages[gameStageIndex].hideMe(),gameStageIndex++,gameStages[gameStageIndex].showMe()),console.log(">> stage start - index: "+gameStageIndex)}function onTick(){background.updateMe(),asteroidStage.updateMe(),cometStage.updateMe(),astronautStage.updateMe(),stage.update()}var BASE_HEIGHT=960,BASE_WIDTH=640,scaleRatio=1,mobile=!1,mobileOS=null,stage=null,canvas=null,root=null,frameRate=30,instructions=!0,background=null,spaceShip=null,startStage=null,instructStage=null,assemblyStage=null,colorStage=null,blastOffStage=null,asteroidStage=null,cometStage=null,astronautStage=null,gameStages=[],gameStagesNoInstruct=[],gameStageIndex=0,ua=navigator.userAgent.toLowerCase();if(ua.match(/(android)/)&&(mobile=!0,console.log(">> device info: "+ua),mobileOS=ua.match(/android/)?"android":"iOS"),"android"===mobileOS){var js=document.createElement("script");js.type="text/javascript",js.src="cordova.js",document.body.appendChild(js)}mobile?document.addEventListener("deviceready",onInit,!1):window.addEventListener("load",onInit,!1);